Date.prototype.format=function(n){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},t;/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(t in i)new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,RegExp.$1.length===1?i[t]:("00"+i[t]).substr((""+i[t]).length)));return n};layui.define("layer",function(n){var i=layui.jquery,t=layui.layer,r={list2Tree:function(n,t,i){var r=n.slice();return r.filter(function(n){var u=r.filter(function(i){return n.id===i[t]});return u.length>0&&(n.children=u),n[t]===i})},tree2List:function(n,t){var i=n.slice();return i.reduce(function(n,i){var r=arguments.callee;return n.push(i),i[t]&&i[t].length>0&&i[t].reduce(r,n),n},[]).map(function(n){return n[t]=[],n})},open:function(n){var r=1;return n.url&&(r=2,n.content=n.url),i.extend(n,{type:r}),t.open(n)},confirm:function(n,i){t.confirm(n,function(n){i&&i();t.close(n)})},post:function(n,r,u){i.post(n,r,function(n){t.msg(n.message);n.ok&&u&&u(n.data)})},download:function(n,r,u){function h(n){var i=new RegExp("(^| )"+n+"=([^;]*)(;|$)"),t=document.cookie.match(i);return t&&t.length>3?unescape(t[2]):null}function c(){var n=t.load(2),i=window.setInterval(function(){var r=h(o);r===s&&(window.clearInterval(i),t.close(n),u&&u())},1e3)}var o="downloadToken",s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)}),f=i('<form method="post" action="'+n+'" target="" style="display:none">').appendTo("body"),e;if(i('<input type="hidden">').attr("name",o).attr("value",s).appendTo(f),r&&r!==null)for(e in r)i('<input type="hidden">').attr("name",e).attr("value",r[e]).appendTo(f);f.submit();c()}};n("common",r)});