var ModuleGrid={option:null,grid:null,toolbar:null,show:function(n){this.option=n;this.grid=new Grid("Module");this.toolbar=new Toolbar("tbModule",this);this.grid.query.pid.setValue(n.pid);this.grid.load()},refresh:function(){this.grid.reload()},showForm:function(n){Dialog.show({name:"System/Module/ModuleForm",title:"模块管理【"+(n.Id===""?"新增":"编辑")+"】",callback:function(){}})},add:function(){this.showForm({Id:""})},edit:function(){var n=this;this.grid.checkSelect(function(t){n.showForm(t)})},remove:function(){this.grid.deleteRows(function(){})},close:function(){ModuleView.close()},search:function(){this.grid.search()}},ModuleView={tree:null,show:function(){this.tree=mini.get("leftTree");this.tree.on("nodeselect",this.onTreeNodeSelect);this.showGrid("0")},close:function(){window.CloseOwnerWindow()},showGrid:function(n){var t=this;ModuleGrid.show({pid:n,callback:function(){t.tree.reload()}})},onTreeNodeSelect:function(n){ModuleView.showGrid(n.node.id)}};$(function(){mini.parse();ModuleView.show()});